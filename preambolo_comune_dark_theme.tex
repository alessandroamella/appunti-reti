%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PREAMBOLO COMUNE PER APPUNTI (Stile Scuro)
%
% Questo file contiene tutte le impostazioni e i pacchetti comuni.
% NON contiene \begin{document} o \end{document}.
%
% Istruzioni per la compilazione del file principale:
% pdflatex -shell-escape nomefile_principale.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{article}

% --- Encoding e lingua ---
\usepackage[utf8]{inputenc}
\usepackage[italian]{babel}

% --- Margini e layout ---
\usepackage{geometry}
\geometry{a4paper, margin=1in}

% --- Font sans-serif (come Helvetica) ---
\usepackage[scaled]{helvet}
\renewcommand{\familydefault}{\sfdefault}
\usepackage[T1]{fontenc}

% --- Matematica ---
\usepackage{amsmath}
\usepackage{amssymb}

% --- Liste personalizzate ---
\usepackage{enumitem}
% \setlist{nosep}

% --- Immagini e Grafica ---
\usepackage{float}
% \usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, shapes.symbols, positioning, arrows.meta, calc, fit, backgrounds, patterns, decorations.pathreplacing, shapes.misc}

% Ensure the key shape from shapes.symbols is loaded
\tikzset{key/.append style={shape=key}}

% Stili TikZ
\tikzset{
    actor/.style={rectangle, draw, fill=blue!20, text=white, minimum height=1cm, minimum width=2cm, text centered},
    arrow/.style={-{Stealth[length=3mm, width=2mm]}, thick, orange},
    block/.style={rectangle, draw, fill=gray!20, text=white, minimum height=0.8cm, minimum width=2.5cm, text centered},
    channel/.style={draw, thick, loosely dashed, blue!50},
    cloud/.style={ellipse, draw=gray, fill=gray!10, minimum height=3em, minimum width=5em, text=lighttext},
    computer/.style={rectangle, draw, fill=blue!30, minimum width=0.8cm, minimum height=0.6cm, text centered},
    dataflow/.style={->, >=Stealth, thick, rounded corners},
    datagram/.style={rectangle, draw=yellow, fill=yellow!10, minimum width=2.5cm, text=black, font=\small, align=center},
    host/.style={rectangle, rounded corners, draw=cyan, fill=blue!20, minimum height=2em, minimum width=3em, text=lighttext},
    intruder/.style={star, star points=7, star point ratio=0.5, draw, fill=red!50, text=white, minimum size=1.5cm, text centered},
    % Custom key shape that doesn't rely on the built-in key shape
    key/.style={rectangle, rounded corners=0.15cm, draw, fill=yellow!50, minimum size=0.5cm, font=\tiny},
    line/.style={thick, gray!80},
    message_l/.style={<-, >=Stealth, thick},
    message_r/.style={->, >=Stealth, thick},
    process/.style={rectangle, draw, fill=green!20, text=white, rounded corners, minimum height=0.8cm, text centered},
    r_arrow/.style={{Stealth[length=3mm, width=2mm]}-, thick, orange},
    server/.style={rectangle, draw, fill=green!50, minimum width=0.8cm, minimum height=1cm, text centered},
    servernode/.style={cylinder, shape border rotate=90, draw=orange, fill=orange!20, aspect=0.5, minimum height=2.5em, text=lighttext},
    % Dark theme styles
    nodo_base/.style={rectangle, rounded corners, draw=white, fill=gray!60!black, text=white, minimum height=1.5em, minimum width=4em, text centered},
    nodo_testo/.style={text=white, font=\footnotesize},
    linea/.style={draw=white, -{Stealth[length=2mm, width=1.5mm]}},
    linea_doppia/.style={draw=white, <->, Stealth-Stealth},
    blocco_tempo/.style={rectangle, draw=white, fill=blue!70!black, text=white, minimum height=0.6cm, font=\tiny, anchor=south west},
    blocco_tempo_verde/.style={rectangle, draw=white, fill=green!70!black, text=white, minimum height=0.6cm, font=\tiny, anchor=south west},
    blocco_tempo_rosso/.style={rectangle, draw=white, fill=red!70!black, text=white, minimum height=0.6cm, font=\tiny, anchor=south west},
    blocco_tempo_hatch/.style={rectangle, draw=white, pattern=north east lines, pattern color=gray, text=white, minimum height=0.6cm, font=\tiny, anchor=south west},
    % Additional dark theme styles
    node_style/.style={circle, draw=accentcolor, fill=nodecolor, text=white, minimum size=7mm, font=\sffamily\small},
    important_node_style/.style={node_style, fill=highlightcolor!60!nodecolor, text=black, font=\sffamily\small\bfseries},
    link_style/.style={-{Stealth[length=2mm, width=1.5mm]}, draw=linkcolor, thick},
    highlight_link_style/.style={-{Stealth[length=2mm, width=1.5mm]}, draw=highlightcolor, very thick},
    info_box/.style={rectangle, draw=accentcolor, fill=bgcolor, rounded corners, inner sep=5pt, text width=6cm, font=\sffamily\footnotesize, text=maintext},
    zone_style/.style={rectangle, draw=accentcolor, dashed, fill=nodecolor!30, fill opacity=0.5, rounded corners, minimum width=3cm, minimum height=2cm}
}

% --- Tabelle Avanzate ---
\usepackage{array}
\usepackage{booktabs}
\usepackage{longtable}

\usepackage{siunitx} % Per unit√† di misura come GHz, dBm, ecc.

% --- Hyperlink e Metadati PDF ---
\usepackage{hyperref}

\usepackage{graphicx}

\usepackage{xcolor}
\definecolor{lighttext}{rgb}{0.98,0.98,0.98}
\definecolor{bgcolor}{RGB}{20,20,20}
\definecolor{maintext}{RGB}{230,230,230}
\definecolor{accentcolor}{RGB}{70,170,255}
\definecolor{nodecolor}{RGB}{60,100,160}
\definecolor{linkcolor}{RGB}{150,150,150}
\definecolor{highlightcolor}{RGB}{255,220,100}

\hypersetup{
    colorlinks=true,
    linkcolor=white,
    filecolor=magenta,
    urlcolor=cyan,
    citecolor=green,
    % pdftitle, pdfauthor, ecc. verranno impostati nel file principale
    pdfpagemode=FullScreen,
    bookmarksopen=true,
    bookmarksnumbered=true
}

% --- Licenza del documento ---
\usepackage[
  type={CC},
  modifier={by-sa},
  version={4.0},
]{doclicense}

% --- Colori e Sfondo Nero ---
\usepackage{xcolor}
\pagecolor{black}
\color{white}

% --- Evidenziazione del Codice ---
\usepackage{minted}
\setminted{
    frame=lines,
    framesep=2mm,
    fontsize=\small,
    breaklines=true,
    style=monokai,
    bgcolor=black!80
}
\usemintedstyle{monokai}
